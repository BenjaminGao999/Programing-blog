高可用集群
可扩展集群
数据恢复
故障转移

# 主从模式
https://redis.io/topics/replication
支持异步复制和同步复制，默认用异步复制
主从机都要开启持久化

Replication ID, offset

Replication ID 表示同一个数据集
offset同一数据集中主从节点当前数据的标记。
为什么升级为主副本的副本在故障转移后需要更改其复制ID：由于某些网络分区，旧主副本可能仍然作为主副本工作：保留相同的复制ID将违反以下事实：任意两个随机实例的同一ID和同一偏移量意味着它们具有相同的数据集。
禁用从节点的只读功能。
从Redis 2.8开始，只有当至少有N个副本当前连接到主服务器时，才可以将Redis主服务器配置为接受写查询。


Redis expires允许密钥有有限的生存时间。这样的特性取决于实例计算时间的能力，但是Redis副本可以正确地复制带expires的密钥，即使使用Lua脚本更改了这些密钥。



为了实现这样一个功能，Redis不能依赖于主机和副本拥有同步时钟的能力，因为这是一个无法解决的问题，会导致竞争条件和数据集发散，因此Redis使用三种主要技术来使过期密钥的复制能够工作：



副本不会使密钥过期，而是等待主服务器使密钥过期。



当主密钥过期（或由于LRU而逐出它）时，它将合成一个DEL命令，该命令将被传输到所有副本。




但是，由于主驱动过期，有时副本的内存中的密钥可能仍然在逻辑上过期，因为主服务器无法及时提供DEL命令。


此外，当轻轻关闭电源并重新启动时，副本能够在RDB文件中存储所需的信息，以便与主副本重新同步。这在升级时很有用。需要时，最好使用SHUTDOWN命令对副本执行save&quit操作。

# 持久化策略、

# 当RAM空间占满时，清理出可用空间的策略


# 高可用

# 可扩展


# 单机Redis运行模式，为什么单线程执行效率确很高









